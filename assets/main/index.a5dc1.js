window.__require=function t(e,n,o){function r(c,a){if(!n[c]){if(!e[c]){var u=c.split("/");if(u=u[u.length-1],!e[u]){var s="function"==typeof __require&&__require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+c+"'")}c=u}var l=n[c]={exports:{}};e[c][0].call(l.exports,function(t){return r(e[c][1][t]||t)},l,l.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({InputController:[function(t,e,n){"use strict";cc._RF.push(e,"7fa95Gst49O0ocMPdOlE+e9","InputController");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./WatermelonLayer"),a=cc._decorator,u=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchNum=0,e}return r(e,t),e.prototype.start=function(){this.openTouch()},e.prototype.openTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){if(null!=c.default.Instance.targetFruit){this.touchNum=1;var e=this.node.convertToNodeSpaceAR(t.getLocation()).x,n=c.default.Instance.targetFruit.y;cc.tween(c.default.Instance.targetFruit).to(.1,{position:cc.v3(e,n,0)}).start()}},e.prototype.onTouchMove=function(t){null!=c.default.Instance.targetFruit&&(this.touchNum=1,c.default.Instance.targetFruit.x=this.node.convertToNodeSpaceAR(t.getLocation()).x)},e.prototype.onTouchEnd=function(){null!=c.default.Instance.targetFruit&&1==this.touchNum&&(this.touchNum=0,c.default.Instance.targetFruit.getComponent(cc.PhysicsCircleCollider).radius=c.default.Instance.targetFruit.height/2,c.default.Instance.targetFruit.getComponent(cc.PhysicsCircleCollider).apply(),c.default.Instance.targetFruit.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,c.default.Instance.targetFruit.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,-800),c.default.Instance.targetFruit=null,this.scheduleOnce(function(){c.default.Instance.createOneFruit(Math.floor(5*Math.random()),cc.v2(0,500))},.5))},i([u],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./WatermelonLayer":"WatermelonLayer"}],WatermelonFruit:[function(t,e,n){"use strict";cc._RF.push(e,"b0693qUWstP5IeqEKcfGwWQ","WatermelonFruit");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./WatermelonLayer"),a=cc._decorator,u=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fruitNumber=0,e.returnNumber=!1,e.getNumberTime=0,e.bianjieX=0,e.testEndDJS=0,e.endOne=0,e}return r(e,t),e.prototype.start=function(){this.bianjieX=562.5-this.node.width/2},e.prototype.update=function(t){var e=this;if(this.node.x<-this.bianjieX&&(this.node.x=-this.bianjieX),this.node.x>this.bianjieX&&(this.node.x=this.bianjieX),this.returnNumber&&(this.scheduleOnce(function(){e.getNumberTime=0},.25),this.returnNumber=!1),"FruitNode"==this.node.parent.name&&(this.testEndDJS+=t),this.node.y+this.node.width/2>cc.find("Canvas/LineNode").children[0].y&&0==this.endOne&&this.testEndDJS>3){for(var n=0;n<cc.find("Canvas/FruitNode").children.length;n++)cc.find("Canvas/FruitNode").children[n].removeComponent(cc.PhysicsCircleCollider),cc.find("Canvas/FruitNode").children[n].removeComponent(cc.RigidBody);this.node.color=cc.Color.RED,cc.tween(this.node).to(.3,{opacity:0}).to(.3,{opacity:255}).union().repeat(3).call(function(){c.default.Instance.end(),cc.find("Canvas/LineNode").children[0].active=!1}).start(),this.endOne++}},e.prototype.getNumber=function(){var t=this.getNumberTime;return this.getNumberTime++,this.returnNumber=!0,t},e.prototype.onBeginContact=function(t,e,n){var o=this;if("fruit"==n.node.group){if(e.node.y<n.node.y)return;e.node.parent=cc.find("Canvas/FruitNode"),null!=e.node.getComponent(cc.RigidBody)&&(e.node.getComponent(cc.RigidBody).angularVelocity=0);var r=this.fruitNumber,i=n.node.getComponent("WatermelonFruit").fruitNumber;r==i&&r<=9&&i<=9&&0==e.node.getComponent("WatermelonFruit").getNumber()&&(n.node.getComponent(cc.PhysicsCircleCollider).radius=0,n.node.getComponent(cc.PhysicsCircleCollider).apply(),this.node.getComponent(cc.PhysicsCircleCollider).radius=0,this.node.getComponent(cc.PhysicsCircleCollider).apply(),cc.tween(e.node).to(.1,{position:n.node.position}).call(function(){c.default.Instance.score+=o.fruitNumber+1,c.default.Instance.createLevelUpFruit(o.fruitNumber+1,n.node.position),n.node.active=!1,e.node.active=!1,n.node.destroy(),e.node.destroy()}).start())}},i([u],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./WatermelonLayer":"WatermelonLayer"}],WatermelonLayer:[function(t,e,n){"use strict";cc._RF.push(e,"7dcba1TDeBMPIyT0m1vNgnU","WatermelonLayer");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,u=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fruitNode=null,e.targetfruitNode=null,e.fruitPre=null,e.lineNode=null,e.scoreLabel=null,e.Allfruit=[],e.tips=null,e.targetFruit=null,e.score=0,e.endOne=0,e.fruitHeigth=0,e}var n;return r(e,t),n=e,e.prototype.onLoad=function(){null!=n.Instance&&n.Instance.destroy(),n.Instance=this,cc.director.getPhysicsManager().enabled=!0},e.prototype.start=function(){this.init()},e.prototype.init=function(){this.score=0,this.endOne=0,this.fruitNode.removeAllChildren(),this.targetfruitNode.removeAllChildren(),n.Instance.fruitHeigth=0,cc.tween(this.lineNode.children[0]).to(.3,{opacity:255}).to(.3,{opacity:0}).union().repeatForever().start(),this.lineNode.children[0].active=!1,this.createOneFruit(9,cc.v2(0,500))},e.prototype.update=function(){this.scoreLabel.string="\u5f97\u5206\uff1a"+this.score.toString(),this.lineNode.children[0].y-n.Instance.fruitHeigth<200&&this.lineNode.children[0].y-n.Instance.fruitHeigth>=0&&(this.lineNode.children[0].active=!0),this.lineNode.children[0].y-n.Instance.fruitHeigth>200&&(this.lineNode.children[0].active=!1)},e.prototype.createOneFruit=function(t,e){var n=this,o=cc.instantiate(this.fruitPre);o.setParent(this.targetfruitNode),o.getComponent(cc.Sprite).spriteFrame=this.Allfruit[t],o.getComponent("WatermelonFruit").fruitNumber=t,o.setPosition(e),o.setScale(0),o.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,o.getComponent(cc.PhysicsCircleCollider).radius=0,o.getComponent(cc.PhysicsCircleCollider).apply(),cc.tween(o).to(.5,{scale:1},{easing:"backOut"}).call(function(){n.targetFruit=o}).start()},e.prototype.createLevelUpFruit=function(t,e){var o=cc.instantiate(this.fruitPre);o.parent=this.fruitNode,o.getComponent(cc.Sprite).spriteFrame=this.Allfruit[t],o.getComponent("WatermelonFruit").fruitNumber=t,o.position=e,o.scale=0,o.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,-100),o.getComponent(cc.PhysicsCircleCollider).radius=o.height/2,o.getComponent(cc.PhysicsCircleCollider).apply(),cc.tween(o).to(.5,{scale:1},{easing:"backOut"}).call(function(){null!=o.getComponent(cc.PhysicsCircleCollider)&&(o.getComponent(cc.PhysicsCircleCollider).radius=o.height/2,o.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,o.getComponent(cc.PhysicsCircleCollider).apply())}).start(),n.Instance.fruitHeigth=n.Instance.findHighestFruit()},e.prototype.end=function(){var t=this;if(0==this.endOne){for(var e=0,o=function(o){setTimeout(function(){n.Instance.score+=t.fruitNode.children[o].getComponent("WatermelonFruit").fruitNumber+1,t.fruitNode.children[o].active=!1},10*++e)},r=this.fruitNode.children.length-1;r>=0;r--)o(r);this.targetfruitNode.active=!0;for(var i=0;i<this.targetfruitNode.children.length;i++)this.targetfruitNode.children[i].active=!1;this.endOne++}var c=cc.instantiate(this.tips);this.node.addChild(c)},e.prototype.findHighestFruit=function(){for(var t=this.fruitNode.children[0].y,e=1;e<this.fruitNode.children.length;e++){var n=this.fruitNode.children[e].y+this.fruitNode.children[e].width/2;t<n&&(t=n)}return t},e.Instance=null,i([u(cc.Node)],e.prototype,"fruitNode",void 0),i([u(cc.Node)],e.prototype,"targetfruitNode",void 0),i([u(cc.Prefab)],e.prototype,"fruitPre",void 0),i([u(cc.Node)],e.prototype,"lineNode",void 0),i([u(cc.Label)],e.prototype,"scoreLabel",void 0),i([u(cc.SpriteFrame)],e.prototype,"Allfruit",void 0),i([u(cc.Prefab)],e.prototype,"tips",void 0),n=i([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],WatermelonTips:[function(t,e,n){"use strict";cc._RF.push(e,"3857cludUVMJ6TCsiwMyCHp","WatermelonTips");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./WatermelonLayer"),a=cc._decorator,u=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e.prototype.onClickClose=function(){c.default.Instance.init(),this.node.removeFromParent(),this.node.destroy()},i([u],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./WatermelonLayer":"WatermelonLayer"}]},{},["InputController","WatermelonFruit","WatermelonLayer","WatermelonTips"]);